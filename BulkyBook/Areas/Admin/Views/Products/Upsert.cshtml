@model Product

<form method="post" asp-action="Upsert">
    <input asp-for="Id" hidden />
    <div class="border p-3 mt-4 col-6">
        <div class="row pb-2">
            <h2 class="text-primary">@ViewBag.Title</h2>
            <hr />
        </div>
        @*<div asp-validation-summary="All" class="text-danger"></div>*@
        <div class="mb-3">
            <label asp-for="Title"></label>
            <input asp-for="Title" class="form-control" />
            <span asp-validation-for="Title" class="text-danger"></span>
        </div>
        <div class="mb-3">
            <label asp-for="Author"></label>
            <input asp-for="Author" class="form-control" />
            <span asp-validation-for="Author" class="text-danger"></span>
        </div>
        <div class="mb-3">
            <label asp-for="Description"></label>
            <textarea asp-for="Description" class="form-control"></textarea>
            <span asp-validation-for="Description" class="text-danger"></span>
        </div>
        <div class="mb-3">
            <label asp-for="ISBN"></label>
            <input asp-for="ISBN" class="form-control" />
            <span asp-validation-for="ISBN" class="text-danger"></span>
        </div>
        <div class="mb-3">
            <label asp-for="ListPrice"></label>
            <input asp-for="ListPrice" class="form-control" />
            <span asp-validation-for="ListPrice" class="text-danger"></span>
        </div>
        <div class="mb-3">
            <label asp-for="Price"></label>
            <input asp-for="Price" class="form-control" />
            <span asp-validation-for="Price" class="text-danger"></span>
        </div>
        <div class="mb-3">
            <label asp-for="Price50"></label>
            <input asp-for="Price50" class="form-control" />
            <span asp-validation-for="Price50" class="text-danger"></span>
        </div>
        <div class="mb-3">
            <label asp-for="Price100"></label>
            <input asp-for="Price100" class="form-control" />
            <span asp-validation-for="Price100" class="text-danger"></span>
        </div>
        <div class="mb-3">
            <label asp-for="CategoryId"></label>
            <select asp-for="CategoryId" asp-items="ViewBag.CategoriesList" class="form-select">
                <option disabled selected>--Select Category--</option>
            </select>
            <span asp-validation-for="CategoryId" class="text-danger"></span>
        </div>
        <div class="mb-3">
            <label asp-for="CoverTypeId"></label>
            <select asp-for="CoverTypeId" asp-items="@(ViewData["CoverTypesList"] as IEnumerable<SelectListItem>)" class="form-select">
                <option disabled selected>--Select Cover Type--</option>
            </select>
            <span asp-validation-for="CoverTypeId" class="text-danger"></span>
        </div>
        @if (ViewBag.Title == "Create Product")
        {
            <button type="submit" class="btn btn-primary" style="width:150px">Save</button>
            <a asp-area="Admin" asp-controller="Products" asp-action="Index" class="btn btn-secondary" style="width:150px">Cancel</a>
        }
        else
        {
            <button type="submit" class="btn btn-primary" style="width:150px">Update</button>
            <a asp-area="Admin" asp-controller="Products" asp-action="Index" class="btn btn-secondary" style="width:150px">Cancel</a>
            <a class="btn btn-danger js-delete" data-coverType-id="Id" style="width:150px">Delete</a>
        }
    </div>
    @Html.AntiForgeryToken()
</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="~/js/bootbox.min.js"></script>
    <script>
        $(document).on('click', '.js-delete', function () {
            var button = $(this);

            bootbox.confirm({
                title: 'Delete Product?',
                message: 'Are you sure you want to delete this product?',
                buttons: {
                    cancel: {
                        label: '<i class="bi bi-x-square"></i>&nbsp; No',
                        className: 'btn-success'
                    },
                    confirm: {
                        label: '<i class="bi bi-check-square"></i>&nbsp; Yes',
                        className: 'btn-danger'
                    }
                },
                callback: function (result) {
                    if (result) {
                        window.location.assign("/Admin/Products/Delete/" + button.attr("data-product-id"));
                    }
                }
            });
        })
    </script>
}